"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4281],{14281:function(e,t,r){r.d(t,{G:function(){return eL}});var l,a,n=r(85893),i=r(86221),o=r(93967),s=r.n(o),c=r(23279),d=r.n(c),u=r(11163),h=r(67294),b=r(26793),m=r(41960),f=r(20506),p=r(29479),g=r(75195),v=r(79401),x=r(80129),y=r(10708),w=r(17537),j=r(50440),S=r(81895),N=r(332),k=r(49568),C=r(20494),E=r(76540),A=r(94883);let _=(e,t)=>e?(0,S.vU)(t[w.Oz.SortBy]||w.ER.Relevant):t[w.Oz.SortBy]||(0,S.vU)(t[C.D2]||"")||w.ER.Relevant,I=function(e,t,r,l){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=(0,p.b)(),i=e===N.A.SearchNews?N.A.SearchNews:e,o=(0,N.q)(i,n),[s]=(0,y.Z)([C.mh]),c=(0,x.parse)(s[C.mh]),d=l.endsWith("/")?l:"".concat(l,"/"),u=!!c.video,h=(0,C.IT)(c),b=(0,N.q)(i,"en")!==d,m=h?"":(0,E.wV)((0,k.ks)((0,k.Nq)({[C._e]:_(r,c),...u&&r||!u&&!r?c:{},qt:void 0,page:void 0,ispartial:void 0,video:void 0,dist:void 0,t:void 0,slug:void 0,imgt:r||0===a?void 0:"".concat(a),...b&&{[w._K.PseudoID]:void 0,[w._K.PseudoST]:void 0,[C.xz]:void 0,[C.PK]:void 0}}))),{distributorTerritory:f,regionalDistributorUrl:v}=(0,g.m)(o),{collectionNamePath:S,collectionName:I}=(0,A.u)((0,N.q)(e===N.A.SearchNews?N.A.SearchNews:N.A.SearchPage,n)),R=f||I;if(R&&!r){let r="/news/newsresults.aspx";return o.includes(r)?"".concat(o.slice(0,o.length-r.length),"/").concat(R).concat(r,"?qt=").concat(t):(0,j.uP)(e,f?v:S,t,m,a)}if(I&&r){let{collectionNamePath:e}=(0,A.u)((0,N.q)(N.A.SearchFootage,n));return"".concat(e,"?qt=").concat(t)}return(0,j.uP)(e,(0,N.q)(e,n),t,m,a)};var R=r(23937),F=r(43672),U=r(31542),L=r(86420),P=r(37340),q=r(9140),D=r(38349),z=r(8719),J=r(61847),T=r(56773),O=r(36335),V=r(73582),K=r(67814),B=r(32512);let Z=["jpg","jpeg","png"],G=(e,t)=>{let r=e.name.split(".").pop()||"";return e.name.includes(".")&&Z.includes(r.toLowerCase())?e.size>5242880?Error(t("reverse-search.image-upload-error-file-size")):null:Error(t("reverse-search.image-upload-error-file-type"))};function M(){let e=(0,P._)(["reverse-search.image-upload-text"]);return M=function(){return e},e}function $(){let e=(0,P._)(["reverse-search.image-upload-or"]);return $=function(){return e},e}function H(){let e=(0,P._)(["reverse-search.image-upload-cta"]);return H=function(){return e},e}function W(){let e=(0,P._)(["reverse-search.image-upload-specs"]);return W=function(){return e},e}let Y=()=>Z.map(e=>".".concat(e)).join(","),Q=e=>{let{onFileChange:t,isLoading:r=!1}=e,{t:l}=(0,b.$)(),[a,o]=(0,h.useState)(null),c=e=>{o(null);let[a]=e;if(!a||r)return;let n=G(a,l);n?o(n):t&&t(a)},{getRootProps:d,getInputProps:u,isDragActive:m}=(0,B.uI)({onDrop:e=>c(e),multiple:!1}),{onClick:f,...p}=d(),g=u();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{...p,className:s()("relative w-full text-center border-4 border-dashed mb-7 bg-grey-light text-grey-black p-10",m&&!r?"border-grey-deep":"border-grey-mid"),children:[(0,n.jsx)(K.G,{icon:V.FV7,size:"5x",className:"mb-3 text-black fill-current"}),(0,n.jsx)("h4",{className:"hidden my-5 text-lg md:block",children:l(M())}),(0,n.jsx)("h5",{className:"hidden text-lg md:block",children:l($())}),(0,n.jsx)("div",{className:"mt-5 overflow-hidden",children:(0,n.jsx)(i.ofU,{primary:!0,size:i.qE.Large,onClick:f,loading:r,className:"mx-auto text-lg font-bold xs:w-auto xs:px-14",children:l(H())})})]}),(0,n.jsx)("input",{...g,accept:Y()}),a?(0,n.jsx)("p",{className:"text-sm font-bold text-center text-red",children:a.message}):(0,n.jsx)("p",{className:"text-sm font-bold text-center text-grey-deep",children:l(W())})]})};var X=r(68779),ee=r(17950);function et(){let e=(0,P._)(["reverse-search.url-searchinput-text"]);return et=function(){return e},e}function er(){let e=(0,P._)(["reverse-search.url-searchspecs"]);return er=function(){return e},e}let el=/^(https?:\/\/)[^/]{1,1}.*(jpe?g|png)((#|\?)|$)/i,ea=e=>{let{onSubmit:t}=e,{t:r}=(0,b.$)(),l=(0,ee.U)("",e=>e&&el.test(e)?null:r("reverse-search.url-invalid-error"));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("form",{className:"flex w-full mb-3 border border-black rounded-full 2xs:p-0 md:p-0",onSubmit:e=>{e.preventDefault(),l.valid&&t(l.value)},children:[(0,n.jsx)("input",{type:"text",className:"flex-1 min-w-0 pl-4 text-base font-normal bg-transparent appearance-none h-13 focus:outline-none",placeholder:r(et()),...l.props}),(0,n.jsx)("button",{type:"submit",title:r("reverse-search.url-searchcta"),className:"px-4 text-xl text-black border-black rounded-r-full hover:text-green",children:(0,n.jsx)(K.G,{icon:X.wn1,className:"fa-fw"})})]}),l.showError&&l.error?(0,n.jsx)("p",{className:"text-sm font-bold mb-7 text-red",children:l.error}):(0,n.jsx)("p",{className:"text-sm font-bold mb-7 text-grey-deep",children:r(er())})]})};function en(){let e=(0,P._)(["reverse-search.title"]);return en=function(){return e},e}function ei(){let e=(0,P._)(["reverse-search.tabs-label"]);return ei=function(){return e},e}function eo(){let e=(0,P._)(["reverse-search.tab-image-upload"]);return eo=function(){return e},e}function es(){let e=(0,P._)(["reverse-search.tab-url-search"]);return es=function(){return e},e}let ec=e=>{let{defaultTab:t,...r}=e,{t:l}=(0,b.$)(),a=(0,p.b)(),[i,o]=(0,q.$)(),s=(0,N.q)(N.A.SearchPage,a),c=e=>{(0,z.L9)({event:z.ju.Click,action:z.aU.ReverseImageSearch,category:z.WD.SearchBar,label:e.startsWith("https://")?l("reverse-search.tab-url-search"):l("reverse-search.tab-image-upload")}),location.href="".concat(s,"?imageurl=").concat(e)},d=e=>o(async()=>{c(await (0,D.Yr)(e))});return(0,n.jsxs)(J.u_,{transition:J.Lt.SlideDown,large:!0,className:"font-noto",...r,"data-testid":"reverse-search-modal",children:[(0,n.jsx)(J.r6,{children:l(en())}),(0,n.jsxs)(O.m,{className:"block","aria-label":l(ei()),defaultSelected:t,onChangeTab:e=>{(0,z.L9)({event:z.ju.Click,action:z.aU.ReverseImageTabClick,category:z.WD.SearchBar,label:0===e?l("reverse-search.tab-image-upload"):l("reverse-search.tab-url-search")})},children:[(0,n.jsx)(T.x,{title:l(eo()),children:(0,n.jsx)(Q,{isLoading:i,onFileChange:e=>d(e).catch(L.S3)})}),(0,n.jsx)(T.x,{title:l(es()),children:(0,n.jsx)(ea,{onSubmit:c})})]})]})};var ed=r(26839),eu=r(13910),eh=r(78031),eb=r(53491),em=r(31878),ef=r(59176),ep=r(66791);let eg=e=>{let{query:t,suggestion:r,results:l,onSuggestionChange:a,onSearch:i}=e,o=r?l.indexOf(r):-1,c=e=>{a(e),i()},d=e=>a(e<0?null:l[e]),u=()=>d(o-1),h=()=>d(o>=l.length-1?0:o+1);return(0,ep.Z)("keydown",e=>{"ArrowUp"===e.key?(e.preventDefault(),u()):"ArrowDown"===e.key&&(e.preventDefault(),h())}),(0,n.jsx)("ul",{className:"absolute z-30 w-full mt-2 bg-white border border-grey-border top-full",role:"list",children:l.map(e=>(0,n.jsxs)("li",{className:s()("px-4 py-2 text-lg text-left cursor-pointer text-grey-deep hover:bg-grey-light transition-colors font-noto font-bold",e===r&&"text-grey-black bg-grey-mid"),"aria-selected":e===r,role:"option",onMouseDown:()=>{c(e),(0,z.L9)({event:z.ju.Click,action:z.aU.SuggestionClick,category:z.WD.SearchBar,label:e})},children:[t,(0,n.jsx)("span",{className:"font-normal text-navy-tint",children:e.slice(t.length)})]},e))})},ev=e=>{let{icon:t,label:r,selected:l=!1,children:a,indented:i,onClick:o,...c}=e;return(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{...c,onClick:o,className:s()("flex items-center px-4 py-2.5 text-sm",l?"bg-rebranded-grey text-guppie":"text-grey-black hover:bg-gray-100",i?"pl-6":""),children:[(0,n.jsx)(K.G,{icon:t,className:"text-xl fa-fw"}),(0,n.jsx)("span",{className:"pl-2 font-noto",role:"option","aria-selected":l,children:r})]}),a]})};var ex=r(38040),ey=r(1500),ew=r(8979),ej=r(57770),eS=r(64808),eN=r(64219),ek=r(99654),eC=r(992);let eE={default:N.A.KeywordSearch,[U.JP.Footage]:N.A.SearchFootageNew,[U.JP.LiveNews]:N.A.SearchNews};(l=a||(a={})).AllImages="search-bar.filter-all-images",l.Photographs="search-bar.filter-photographs",l.Vectors="search-bar.filter-vectors",l.Illustrations="search-bar.filter-illustrations",l.Social="search-bar.filter-social",l.ThreeSixtyImages="search-bar.filter-360-images",l.Video="search-bar.filter-footage",l.LiveNews="search-bar.filter-live-news";let eA={"search-bar.filter-all-images":"All images","search-bar.filter-photographs":"Photographs","search-bar.filter-vectors":"Vectors","search-bar.filter-illustrations":"Illustrations","search-bar.filter-social":"Social","search-bar.filter-360-images":"360 Images","search-bar.filter-footage":"Footage","search-bar.filter-live-news":"Live News"},e_=[{icon:ej.Vm,label:"search-bar.filter-all-images",placeholder:"search-bar.placeholder-all-images",shortPlaceholder:"search-bar.short-placeholder-all-images",type:U.lJ.AllImages},{icon:ex.FV,label:"search-bar.filter-photographs",placeholder:"search-bar.placeholder-photographs",indented:!0,type:U.lJ.Photographs},{icon:eC._m,label:"search-bar.filter-vectors",placeholder:"search-bar.placeholder-vectors",indented:!0,type:U.lJ.Vectors},{icon:ek.sS,label:"search-bar.filter-illustrations",placeholder:"search-bar.placeholder-illustrations",indented:!0,type:U.lJ.Illustrations},{icon:eS.bJ,label:"search-bar.filter-social",placeholder:"search-bar.placeholder-social",indented:!0,type:U.lJ.Social},{icon:ey.pX,label:"search-bar.filter-360-images",placeholder:"search-bar.placeholder-360-images",indented:!0,type:U.lJ.Image360},{icon:ew.Cj,label:"search-bar.filter-footage",placeholder:"search-bar.placeholder-footage",locales:["en","de"],type:U.JP.Footage},{icon:eN.Xg,label:"search-bar.filter-live-news",placeholder:"search-bar.placeholder-live-news",locales:["en","de"],type:U.JP.LiveNews}],eI=e=>void 0!==e&&e_.find(t=>t.type===e)||e_[0],eR=e=>{let{onFilterChange:t,currentFilter:r,setReverseSearchOpen:l,selectedFilter:i}=e,{t:o}=(0,b.$)(),c=(0,p.b)(),{isOpen:d,dropdownButtonProps:u,dropdownMenuProps:m,dropdownItemProps:f,close:v}=(0,em.x)(),{distributorTerritory:x}=(0,g.m)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{...u,className:"flex items-center h-full px-4 py-2 text-sm rounded-full cursor-pointer select-none focus:outline-none",title:o("search-bar.select-search-type"),children:[(0,n.jsx)(K.G,{size:"lg",icon:r.icon}),(0,n.jsx)("span",{className:"hidden pl-2 text-black lg:inline font-noto",children:o(r.label)}),(0,n.jsx)(K.G,{className:"flex-1 pl-2 text-lg",icon:eu.pt})]}),(0,n.jsxs)("ul",{...m,className:s()(!d&&"hidden","absolute left-0 z-50 bg-white shadow-md top-full w-auto mt-1 border-b border-black md:border-0 md:mt-2 md:rounded"),"aria-hidden":!d,children:[e_.filter(e=>{let{locales:t,type:r}=e,l=!t||t.includes(c),a=!!(U.JP.Footage!==r&&x);return x?a:l}).map((e,l)=>{let{icon:n,label:s,indented:c,type:d}=e;return(0,h.createElement)(ev,{...f,icon:n,label:o(s),key:l,selected:d===r.type,onClick:()=>{(s!==a.AllImages&&i!==d||i!==U.lJ.AllImages&&s===a.AllImages)&&(0,z.L9)({event:z.ju.Click,action:z.aU.Dropdown,category:z.WD.SearchBar,label:eA[s]}),t(d),v()},indented:c})}),(0,n.jsx)("hr",{className:"mx-4"}),(0,n.jsx)(ev,{...f,icon:eb.FV,label:o("search-bar.search-by-image-short"),onClick:()=>{l(!0),(0,j.ob)(z.aU.ReverseImageIconClick,""),v()}})]})]})},eF=e=>{let{query:t,suggestion:r,autocompleteResults:l,onQueryChange:a,onSuggestionChange:o,onFilterChange:c,selectedFilter:d,setReverseSearchOpen:u,onSearch:m,enableFilterSelect:f=!0,enableReverseImageSearch:p=!0,isVideoSearch:g=!1,errorMessage:v="",classNames:x}=e,{t:y}=(0,b.$)(),w=(0,h.useRef)(null),[S,N]=(0,h.useState)(!1),k=!1,C=eI(d),E="".concat(g?"rounded-full border":"md:rounded-full border-b md:border"," border-black h-12 2xs:p-0 md:p-0 bg-white md:my-2"),{isMobileOrTablet:A}=(0,ef.p)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:s()("search-class flex flex-row items-center border-black-border",E,null==x?void 0:x.wrapper),children:[(0,n.jsxs)("div",{className:"relative flex flex-row items-center flex-1 bg-transparent border-0 cursor-pointer text-grey-black md:mx-0 h-13 noto-sans md:rounded-l-full",children:[f&&(0,n.jsx)(eR,{onFilterChange:c,currentFilter:C,setReverseSearchOpen:u,selectedFilter:d}),(0,n.jsxs)("div",{className:s()("relative flex flex-auto h-10 border-black",{"border-l":f,"ml-3":g},null==x?void 0:x.wrapperInput),children:[(0,n.jsxs)("label",{className:s()("absolute size-full py-2 pl-4 align-middle text-mid-grey cursor-text md:pr-4 font-noto 3xs:py-1.5",{"sr-only":!!t}),htmlFor:"qt",children:[(0,n.jsx)("span",{className:s()("2xl:hidden",{"text-2xs 1xs:text-base 2sm:font-noto":g,"font-noto":!g,"text-red":v}),children:v||y(C.shortPlaceholder||C.placeholder)}),(0,n.jsx)("span",{className:s()("hidden 2xl:inline",{"text-red":v}),children:v||y(C.placeholder)})]}),(0,n.jsx)("input",{ref:w,role:"searchbox",className:"flex-auto w-0 h-full pl-4 pr-10 md:px-4 md:pr-10 focus:outline-none font-noto",onFocus:()=>N(!0),onBlur:()=>N(!1),value:r||t,onChange:e=>a(e.target.value,!0),onKeyDown:e=>{"Escape"===e.key?a(t,!1,!0):"Enter"===e.key&&(k=!0,(0,j.ob)(z.aU.PressEnter,eA[C.label]))},maxLength:250,type:"text",name:"qt",id:"qt",autoComplete:"off","aria-autocomplete":"list"}),S&&t&&l.length>0&&(0,n.jsx)(eg,{query:t,suggestion:r,onSuggestionChange:o,results:l,onSearch:m}),t&&(0,n.jsx)("button",{className:s()(!S&&!A&&"opacity-0","absolute right-0 flex-row items-center h-full px-2 text-xl bg-transparent hover:text-cyan hover:opacity-100 md:flex focus:text-cyan focus:outline-none md:px-4",p&&"md:right-12"),type:"button",title:y("search-bar.reset"),onClick:()=>{a(""),w.current&&w.current.focus()},children:(0,n.jsx)(K.G,{icon:ed.NB,className:"text-grey-deep"})}),p&&(0,n.jsx)("button",{className:s()("relative flex-row items-center hidden h-full text-xl md:flex hover:text-guppie focus:text-green bg-transparent px-2"),type:"button",role:"button","data-testid":"searchByImageLong","aria-label":y("search-bar.search-by-image-long"),onClick:()=>{u(!0),(0,j.ob)(z.aU.ReverseImageIconClick,"")},children:(0,n.jsx)(i.MC8,{icon:eb.FV,tooltipTheme:"dark",customId:"ReverseImageSearchButton",children:y("search-bar.search-by-image-long")})})]})]}),(0,n.jsx)("button",{type:"submit",title:y("search-bar.search"),onClick:()=>{k||(0,j.ob)(z.aU.MagnifierIconClick,eA[C.label])},className:"h-full px-4 text-xl text-black bg-white border-black rounded-r-full focus:outline-none md:bg-white hover:text-guppie",children:(0,n.jsx)(K.G,{icon:eh.wn,className:"fa-fw"})})]})})};var eU=r(97497);let eL=e=>{let{autocompleteResults:t=[],defaultFilterType:r=null,enableFilterSelect:l=!0,enableAutocomplete:a=!0,enableReverseImageSearch:o=!0,isVideoSearch:c=!1,isFixedWidth:x=!1,showSearchCountry:y=!1,withBackground:w=!0,defaultEmptyQuery:j=!1,isNewSearch:S=!1,searchClassNames:N}=e,{t:k}=(0,b.$)(),A=(0,u.useRouter)(),{imgt:_,qt:P=""}=(0,v.Y)(),q=(0,p.b)(),D=(0,m.h)(!0),z=(0,h.useRef)(null),J=(0,R.a)(),{distributorTerritory:T}=(0,g.m)(),[O,V]=(0,h.useState)(!1),[K,B]=(0,h.useState)(null!=r?r:_),[Z,G]=(0,h.useState)(null),[M,$]=(0,h.useState)((0,C.IT)(A.query)?"":P||A.query.qt||""),[H,W]=(0,h.useState)(a?t:[]),[Y,Q]=(0,h.useState)(!0),X=(0,f.ev)(),ee=(0,f.Hz)(),et=X||ee||!!(null==J?void 0:J.territorySelectionEnabled),er="/"===A.pathname&&et,el=K&&eE[K]||eE.default,ea=!!(K&&K===U.JP.Footage),en=e=>{B(e),""!==M&&window.setTimeout(()=>{var t,r;e!==U.JP.LiveNews?null===(t=z.current)||void 0===t||t.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0})):null===(r=z.current)||void 0===r||r.submit()})},ei=(0,h.useCallback)(d()(e=>{(0,F.uM)(D)(e,q).then(e=>W(e)).catch(L.S3)},300),[]),eo=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];$(e),G(null),e&&!Y&&Q(!0),a&&e.length>1&&e!==Z&&t&&"en"===q?ei(e):r&&W([])},es=()=>{window.setTimeout(()=>{if(z.current){var e,t;K!==U.JP.LiveNews?null===(e=z.current)||void 0===e||e.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0})):null===(t=z.current)||void 0===t||t.submit()}},0)};(0,h.useEffect)(()=>{j&&($(""),B(0))},[]);let ed=I(el,Z||M,ea,A.pathname,K);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("form",{action:ed,ref:z,onSubmit:e=>{e.preventDefault(),(0,E.QR)(ed)},className:s()({"md:bg-grey-light":w}),id:"search",children:["number"==typeof K&&(0,n.jsx)("input",{type:"hidden",name:"imgt",value:K,"data-testid":"imgt"}),S?(0,n.jsx)(i.E1j,{query:M,suggestion:Z,selectedFilter:K,autocompleteResults:H,onQueryChange:eo,onFilterChange:en,setReverseSearchOpen:V,onSuggestionChange:G,onSearch:es,errorMessage:Y?"":k("search-bar.search-error"),distributorTerritory:T}):(0,n.jsx)("div",{className:s()(x&&"max-w-50"),children:(0,n.jsx)(eF,{query:M,suggestion:Z,selectedFilter:K,autocompleteResults:H,onQueryChange:eo,onFilterChange:en,setReverseSearchOpen:V,onSuggestionChange:G,enableFilterSelect:l,onSearch:es,enableReverseImageSearch:o,isVideoSearch:c,errorMessage:Y?"":k("search-bar.search-error"),classNames:N})}),y&&et&&(0,n.jsx)(eU.uD,{className:"2sm:w-2/4"}),er&&(0,n.jsx)("input",{type:"hidden",name:"mode",value:"1"})]}),o&&(0,n.jsx)(ec,{show:O,onHide:()=>V(!1)})]})}},97497:function(e,t,r){r.d(t,{uD:function(){return j}});var l=r(37340),a=r(85893),n=r(75503),i=r(93967),o=r.n(i),s=r(11163),c=r(67294),d=r(10708),u=r(26793),h=r(46530),b=r(31878),m=r(65064);let f=()=>(0,c.useContext)(m.T).geoHeader;var p=r(23937),g=r(20494);function v(){let e=(0,l._)(["search-bar.search-territory.default"]);return v=function(){return e},e}let x="default",y={[x]:"Any territory",uk:"United Kingdom",us:"United States",ca:"Canada",fr:"France",de:"Germany",it:"Italy",...h},w=e=>e&&y[e],j=e=>{var t,r;let{className:l,isFilter:i=!1,isDisabled:h}=e,{t:m}=(0,u.$)(),j=(0,p.a)(),S=(0,s.useRouter)(),N=f(),k=(null==j?void 0:j.territorySelectionEnabled)&&j.territoryId.toLowerCase(),[C,E]=(0,d.Z)(),A=m(v()),_=k||!!w(null==N?void 0:N.toLowerCase())&&(null==N?void 0:N.toLowerCase())||x,[I,R]=(0,c.useState)(!!w(null===(t=C[g.d0])||void 0===t?void 0:t.toLowerCase())&&(null===(r=C[g.d0])||void 0===r?void 0:r.toLowerCase())||_),F={...I&&{[I]:y[I]},...y},{isOpen:U,dropdownButtonProps:L,dropdownMenuProps:P}=(0,b.x)(),q=e=>{let t=e===I?void 0:e;R(t),window&&(E(g.d0,t?t.toUpperCase():_,{path:"/"}),S.reload())};return(0,c.useEffect)(()=>{var e;U&&i&&(null===(e=document.querySelector('[data-testid="FilterScrollContent"]'))||void 0===e||e.scrollTo(0,1e3))},[U]),(0,a.jsxs)("div",{"data-testid":"searchCountry",className:o()("relative w-full",l),children:[(0,a.jsxs)("button",{...L,"data-testid":"button",className:o()("pl-4 pr-2.5 flex items-center justify-between w-full bg-white border search-class cursor-pointer select-none focus:outline-none md:my-0.5",i?"h-10 my-2 py-2 rounded":"h-10 py-1 border-t-0 2sm:my-2 2sm:border-t 2sm:h-12 2sm:rounded-full",U?"border-black":"border-grey-light-2"),disabled:h,children:[(0,a.jsx)("span",{"data-testid":"selectedCountry",className:o()("flex text-sm items-center size-full py-1 text-left",h?"text-grey-light-2":"text-black"),children:w(I)||A}),(0,a.jsx)("div",{className:o()("flex items-center h-full ml-auto border-l",U?"border-black":"border-grey-light-2",h?"text-grey-light-2":"text-black"),children:(0,a.jsx)(n.Z,{className:"ml-3"})})]}),U&&(0,a.jsx)("div",{className:o()("absolute z-10 py-2 pr-2 bg-white rounded mt-0.5 top-full h-thirdScreen min-h-52r md:right-4.5",i?"left-0 shadow-md":"inset-x-4"),children:(0,a.jsx)("ul",{...P,className:"h-full pr-4 overflow-y-auto scrollbar-thin scrollbar-thumb-rounded-full scrollbar-thumb-gray-300 scrollbar-track-white","data-testid":"list",children:Object.entries(F).map(e=>{let[t,r]=e;return(0,a.jsx)("li",{className:o()("px-5 py-3 text-sm text-left font-noto transition-colors cursor-pointer",t===I?"bg-rebranded-grey text-guppie":"hover:bg-gray-100"),"data-testid":"option",onClick:()=>q(t),children:r},t)})})})]})}},81895:function(e,t,r){r.d(t,{AL:function(){return v},DH:function(){return g},KG:function(){return m},Kw:function(){return x},QM:function(){return j},Sn:function(){return u},cw:function(){return C},cz:function(){return b},db:function(){return y},di:function(){return E},jF:function(){return w},jw:function(){return A},v1:function(){return S},vU:function(){return k},xK:function(){return h}});var l=r(87185),a=r.n(l),n=r(80129),i=r(25501),o=r(28228),s=r(20494),c=r(4893),d=r(17537);let u=(e,t,r,l)=>{(0,o.CI)(new i.Z(e),void 0,t,r,{encode:String}),(0,o.CI)(new i.Z(e),void 0,s.mh,(0,n.stringify)(l),{encode:String})},h=["All","Creative","Editorial"],b=["All Creative","Ultimate","Vital","Uncut","Foundation"],m=["All Editorial","Archive (greater than 20 years old)"],f=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let l=t.reduce((e,t)=>e.concat(Object.keys(t)),[]),a=new Set(l);return t.every(e=>a.size===Object.keys(e).length)},p=e=>e.filter((t,r)=>e.indexOf(t)!==r),g=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a()(e,(e,r)=>!!f(e,r)&&(Object.keys(r).forEach(l=>{if(!c.Yz.includes(l))return;let a=Array.isArray(r[l])?r[l]:[r[l]],n=Array.isArray(e[l])?e[l]:[e[l]];r[l]=t?[...Array.from(new Set([...a,...n]))]:p([...a,...n])}),!0))},v=e=>{switch(e){case d.yl.AllCreative:case d.yl.Ultimate:case d.yl.Vital:case d.yl.Uncut:case d.yl.Foundation:return 1;case d.yl.EditorialArchive:case d.yl.EditorialCore:return 2;default:return 0}},x=e=>{switch(e){case d.yl.Ultimate:case d.yl.EditorialArchive:return 1;case d.yl.Vital:return 2;case d.yl.Uncut:return 3;case d.yl.Foundation:return 4;default:return 0}},y=e=>{switch(e){case 1:return d.yl.Ultimate;case 2:return d.yl.Vital;case 3:return d.yl.Uncut;case 4:return d.yl.Foundation;default:return d.yl.AllCreative}},w=e=>{switch(e){case 1:return d.yl.AllCreative;case 2:return d.yl.EditorialCore;default:return"0"}},j=e=>0===e?d.yl.EditorialCore:d.yl.EditorialArchive,S=e=>{let t=[d._K.PseudoID,d._K.PseudoST,s.xz,s.PK],r={};return t.forEach(t=>{e[t]||(r[t]=void 0)}),r},N={[d.yl.EditorialCore]:d.ER.NewestDateTaken,[d.yl.EditorialArchive]:d.ER.Relevant,[d.yl.AllCreative]:d.ER.Creative,[d.yl.Uncut]:d.ER.Creative,[d.yl.Ultimate]:d.ER.Creative,[d.yl.Vital]:d.ER.Creative,[d.yl.Foundation]:d.ER.Creative},k=e=>N[e]||d.ER.Relevant,C=e=>e===d.ER.Creative?d.ER.Relevant:e,E=[{width:433,height:357},{width:229,height:357},{width:229,height:357},{width:229,height:357},{width:433,height:357},{width:433,height:357},{width:150,height:357},{width:229,height:357},{width:229,height:357},{width:229,height:357},{width:362,height:357},{width:229,height:357},{width:433,height:357},{width:433,height:357},{width:433,height:357},{width:150,height:357},{width:256,height:357},{width:256,height:357},{width:150,height:357},{width:256,height:357},{width:150,height:357},{width:256,height:357}],A=Array(22).fill({width:528,height:357})},56773:function(e,t,r){r.d(t,{x:function(){return i}});var l=r(85893),a=r(93967),n=r.n(a);let i=e=>{let{children:t,id:r,label:a,selectedTab:i,index:o,className:s}=e;return(0,l.jsx)("div",{tabIndex:0,role:"tabpanel",id:r,"aria-labelledby":a,hidden:i!==o,className:n()("mt-6",i!==o&&"hidden",s),children:t})}},36335:function(e,t,r){r.d(t,{m:function(){return d}});var l=r(85893),a=r(67294),n=r(93967),i=r.n(n);let o=e=>{let{tab:t,selected:r,children:a,onClick:n,className:o,disabled:s,isSubFilter:c}=e,d=s?"":"text-black hover:border-grey-mid";return(0,l.jsx)("button",{className:i()("break-normal md:mr-2 -mb-px px-1 py-3 border-b-2 border-transparent flex-1 md:flex-auto text-sm focus-visible:outline-auto",c?r?"text-blue":"text-black hover:opacity-50":r?"text-black border-blue":d,s&&"text-grey-light-2",o),role:"tab","aria-selected":r,"aria-controls":t.controls,"data-testid":(()=>{if(/all-creative|tutte-creative|kreativ-bildmaterial|todo-lo-creativo|tout-créatif/i.exec(t.id))return"all-creative-tab";if(/all|tutto|alle|todas|tous/i.exec(t.id))return"all-tab";if(/creative|kreatives|creativo|créatif/i.exec(t.id))return"creative-tab";if(/editorial|editoriale|redaktionell|éditorial/i.exec(t.id))return"editorial-tab";if(/ultimate|definitive|ultimativ|definitivo|ultime/i.exec(t.id))return"ultimate-tab";if(/vital|vita|essentiel/i.exec(t.id))return"vital-tab";if(/uncut|integrali|ungekürzt|sin-cortes|intégral/i.exec(t.id))return"uncut-tab";else if(/foundation|fondazione|grundlage|fundación|fondation/i.exec(t.id))return"foundation-tab";return t.id})(),id:t.id,disabled:s,onClick:n,children:a})},s=e=>{let{children:t,selectedTab:r,"aria-label":a,tabs:n,setTab:s,className:c,tabButtonClassName:d,isSubFilter:u}=e;return(0,l.jsxs)("div",{className:i()("flex border-gray-300 font-bold border-b-2 md:flex-auto",c),role:"tablist","aria-label":a,children:[n.map(e=>(0,l.jsxs)(o,{tab:e,selected:r===e.index,onClick:()=>s(e.index),className:d,isSubFilter:u,disabled:e.disabled,children:[e.title,e.subtitle&&(0,l.jsx)("span",{className:"ml-1 font-normal",children:e.subtitle})]},e.id)),t]})},c=(e,t)=>e.reduce((e,r,l)=>{var a,n,i,o;let[s,c]=e,d=Array.isArray(null==r?void 0:null===(a=r.props)||void 0===a?void 0:a.title)?null==r?void 0:null===(n=r.props)||void 0===n?void 0:n.title[0]:null==r?void 0:null===(i=r.props)||void 0===i?void 0:i.title,u=(null==r?void 0:null===(o=r.props)||void 0===o?void 0:o.id)&&r.props.id.toString().replace(/\s+/g,"-").toLowerCase()||d.replace(/\s+/g,"-").toLowerCase(),h="".concat(u,"-tab");return[s.concat({...r,props:{...r.props,id:h,labelledby:u,selectedTab:t,index:l}}),c.concat({title:r.props.title,subtitle:r.props.subtitle,disabled:r.props.disabled,id:u,controls:h,index:l})]},[[],[]]),d=e=>{let{children:t,className:r,defaultSelected:n=0,controlledSelectedTab:i,"aria-label":o,onChangeTab:d,tabListClassName:u,tabButtonClassName:h,isSubFilter:b}=e,[m,f]=(0,a.useState)(n),[p,g]=c(t,i||m);return(0,l.jsxs)("div",{className:r,children:[(0,l.jsx)(s,{tabs:g,"aria-label":o,setTab:e=>{i?i!==e&&d&&d(e):(f(e),m!==e&&d&&d(e))},selectedTab:i||m,className:u,tabButtonClassName:h,isSubFilter:b}),p]})}},31878:function(e,t,r){r.d(t,{x:function(){return a}});var l=r(67294);let a=()=>{let[e,t]=(0,l.useState)(!1),r={type:"button","aria-haspopup":"listbox","aria-expanded":e,onClick:r=>{r.stopPropagation(),t(!e)},ref:(0,l.useRef)(null)},a={ref:(0,l.useRef)(null),role:"listbox",tabIndex:-1};(0,l.useEffect)(()=>{e&&a.ref.current&&a.ref.current.focus()},[e]);let n=()=>t(!1),i=()=>n(),o=(0,l.useCallback)(e=>{var t,l,n,o,s,c;null===(t=r.ref)||void 0===t||!t.current||(null===(n=r.ref)||void 0===n?void 0:null===(l=n.current)||void 0===l?void 0:l.contains(null==e?void 0:e.target))||null===(o=a.ref)||void 0===o||!o.current||(null===(c=a.ref)||void 0===c?void 0:null===(s=c.current)||void 0===s?void 0:s.contains(null==e?void 0:e.target))||i()},[r.ref,e]);return(0,l.useEffect)(()=>(window.addEventListener("click",i),window.addEventListener("mousedown",o),()=>{window.removeEventListener("click",i),window.removeEventListener("mousedown",o)}),[]),{isOpen:e,setIsOpen:t,close:n,dropdownButtonProps:r,dropdownItemProps:{tabIndex:0},dropdownMenuProps:a}}},17950:function(e,t,r){r.d(t,{U:function(){return a}});var l=r(67294);let a=(e,t)=>{let[r,a]=(0,l.useState)(e),[n,i]=(0,l.useState)(!1),[o,s]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!0),[u,h]=(0,l.useState)(!1),[b,m]=(0,l.useState)(null),f=!b,p=(0,l.useRef)(null),g=function(){var e;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;m((null===(e=p.current)||void 0===e?void 0:e.validationMessage)||t&&t(l)||null)},v=()=>{i(!1),g(),o||s(!0)};return{props:{onKeyDown:e=>{"Enter"===e.key&&(f||e.preventDefault(),d(!1),v())},onInvalid:e=>{e.preventDefault(),u||h(!0)},onFocus:()=>i(!0),onBlur:v,onChange:e=>{let{target:t}=e,r=t.value;d(!1),a(r),g(r)},value:r,ref:p},error:b,valid:f,value:r,hasFocus:n,hasBlurred:o,hasValidated:u,reset:()=>{a(e),s(!1),h(!1),d(!0),g()},pristine:c,showError:!!b&&(u||o),ref:p}}},79401:function(e,t,r){r.d(t,{Y:function(){return n}});var l=r(10708),a=r(20494);let n=()=>{let[e]=(0,l.Z)([a.mh]);return(0,a.Ey)(e[a.mh]||"")}},38349:function(e,t,r){r.d(t,{H4:function(){return f},Yr:function(){return u}});var l=r(70343),a=r(23374),n=r(46962),i=r(76033),o=r(5121),s=r(57632),c=r(98981),d=r(86420);let u=async e=>{try{let t=e.name.split(".").pop(),r="".concat((0,s.Z)(),".").concat(t),{data:{url:l}}=await o.Z.post((0,c.b)().reverseSearchImageUploadUrl,{fileName:r});return await o.Z.put(l,e),r}catch(e){throw Error(e.message)}},h=async()=>{let e=new n.C({SecretId:(0,c.b)().openSearchAuthSecret}),t=new i.y({region:(0,c.b)().awsRegion}),r=await t.send(e);if(void 0===r.SecretString)throw Error("SecretString is undefined");return JSON.parse(r.SecretString)},b=async e=>{let t=new l.A({region:(0,c.b)().bedrockAwsRegion}),r=new a.X({contentType:"application/json",body:JSON.stringify({inputText:e,embeddingConfig:{outputEmbeddingLength:384}}),modelId:"amazon.titan-embed-image-v1"}),n=await t.send(r);return JSON.parse(new TextDecoder().decode(n.body)).embedding},m=e=>{let t=e.sort((e,t)=>t._score-e._score),r=[],l={};t.forEach(e=>{l[e._source.user_id]||(l[e._source.user_id]=[]),l[e._source.user_id].push(e)});let a=Object.values(l);for(;r.length<t.length;)a.forEach(e=>{if(e.length>0){let t=e.shift();t&&r.push(t)}});return r},f=async(e,t)=>{let r=(0,c.b)().openSearchHost,l=(0,c.b)().openSearchIndex,a="".concat(r,"/").concat(l,"/_search?search_pipeline=alamy-test-pipeline"),n=[];n=t?"editorial-core"===t?["editorialcore"]:t.split(","):["vital","editorialcore"];try{var i,s,u;let t=await h(),r=await b(e),l={size:1500,query:{hybrid:{queries:[{knn:{vector:{vector:r,min_score:.5}}},{query_string:{fields:["essential_words^5","caption^3","main_words","extra_words"],query:e,default_operator:"AND"}}]}},post_filter:{terms:{collection_id:n}}},c=await o.Z.post(a,l,{auth:t}),d=m(null===(i=c.data.hits)||void 0===i?void 0:i.hits).map(e=>{var t,r;return{source_url:"https://c7.alamy.com/zooms/9/".concat(null===(t=e._source)||void 0===t?void 0:t.ref,"/").concat(null===(r=e._source)||void 0===r?void 0:r.ref,".jpg")}});return console.log("Matched ".concat(null===(u=c.data.hits)||void 0===u?void 0:null===(s=u.total)||void 0===s?void 0:s.value," results")),{data:{results:d}}}catch(e){return console.log("Search to ".concat(a," failed: ").concat(e.message," ")),(0,d.S3)(Error(e.message)),{data:{results:[]}}}}}}]);